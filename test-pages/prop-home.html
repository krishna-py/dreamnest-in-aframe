<!-- 

Prop Home informs the viewer about the primary highlights of the project, such as its location, nearby amenities, access road, etc.

The scene is setup as a 2x2 meter platform at a height of 30cm, with geo spatial overlay of the property.

The property itself is pinned to its the geo location above the platform. Above the property, at a height of 3m there will be compass indicator. 
There can be small markers and posters for nearby areas of interest such as schools and hospitals.

in VR mode, the user can walk around, and click the property itself and its markers to get more information. 
For markers, info is the type, name, and distance. For the property, it is the project name, project start, hand over dates, occupancy levels, etc. 

Configuration:
1. Platform dimensions in w x h, scale of the map, height at which the property hovers, height at which the compass hovers, and the height of the markers.

Interaction:
1. Click on property
2. Click on marker
3. Stop/Rotate the platform

 -->


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Property Home Page</title>

    <!-- Scripts  -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.4.0/dist/aframe-extras.min.js"></script>

    <!-- Custom scripts -->
    <script src="../js/levitate.js"></script>
</head>

<body>
    <a-scene background="color: #212" cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .raycastable">
        <a-assets>

            <!-- scene setup -->
            <!-- markers -->
            <img id="compass" src="../assets/markers/compass-vector.png" />
            <img id="generic-marker" src="../assets/markers/gps-marker.png" />
            <img id="shop-marker" src="../assets/markers/supermarket-icon.png" />
            <img id="school-marker" src="../assets/markers/edu-icon.png" />
            <img id="hospital-marker" src="../assets/markers/hospital-icon.png" />
            <img id="bus-stop-marker" src="../assets/markers/public-transport-icon.png" />
            <img id="eat-marker" src="../assets/markers/restau-icon.png" />
            <img id="bank-atm-marker" src="../assets/markers/atm-cash.png" />

            <!-- ground textures -->
            <img id="ground_ao" src="../assets/ground/pebble/pebble_cemented_floor_ao_1k.jpg">
            <img id="ground_disp" src="../assets/ground/pebble/pebble_cemented_floor_disp_1k.jpg">
            <img id="ground_normal" src="../assets/ground/pebble/pebble_cemented_floor_nor_gl_1k.jpg">
            <img id="ground_diff" src="../assets/ground/pebble/pebble_cemented_floor_diff_1k.jpg">

            <!-- property specific -->
            <img id="osm-svg" src="../assets/scene/map_hyd.svg" />
            <a-asset-item id="property"
                src="https://cdn.glitch.me/1a72625f-7082-4c2f-9a68-3914685b4e4e/modern_villa1.glb?v=1725287736144"></a-asset-item>

            <a-mixin id="pebble_ground" material="src: #ground_diff; repeat: 10 10; 
                ambientOcclusionMap: #ground_ao; ambientOcclusionTextureRepeat: 10 10; 
                displacementMap: #ground_disp; displacementTextureRepeat: 10 10; 
                normalMap: #ground_normal; normalTextureRepeat: 10 10;"></a-mixin>

            <a-mixin id="map_svg" material="src: #osm-svg;"></a-mixin>
        </a-assets>

        <!-- Basic scene setup -->
        <!-- lights -->
        <a-entity light="type: ambient; color: #BBB"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 0.6" position="0 10 0"></a-entity>
        <!-- ground -->
        <!-- add realistic ground -->
        <a-plane id="ground" position="0 -.9 0" rotation="-90 0 0" width="10" height="10" mixin="pebble_ground"></a-plane>
        
        <!-- objects in the scene -->
        <!-- <a-sphere position="0 1 -3" radius=".25" color="#EF2D5E" color-toggle></a-sphere> -->
        <!-- add a raised platform to display the map -->
        <a-box src="#osm-svg" width="5.56" height="3" depth="0.01" position="0 0.25 0" rotation="-90 0 0">
            <a-image src="#compass" width="1" height="1" depth="0.01" position="0 0 2" opacity=".5"></a-image>
        </a-box>
        <!-- scaled villa project in the middle levitating -->
        <a-entity gltf-model="#property" position="0 1 0" rotation="0 0 0" scale="0.05 0.05 0.05" levitate></a-entity>

        <!-- Camera  -->
        <a-entity id="rig" movement-controls="controls: checkpoint, gamepad, trackpad, keyboard, nipple"
            checkpoint-controls="mode: animate" position="0 1.6 2" rotation="0 0 0">
            <a-entity id="head" camera look-controls="pointerLockEnabled: true" wasd-controls update-info>
                <a-entity cursor raycaster="objects:[checkpoint]" position="0 0 -1"
                    geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03;"
                    material="color: lightgreen; shader: flat;"></a-entity>
            </a-entity>
        </a-entity>


    </a-scene>
</body>

</html>